{"ast":null,"code":"'use strict';\n\nvar util = require('util');\n\nvar Transform = require('stream').Transform;\n\nvar KafkaBuffer = require('../batch/KafkaBuffer');\n\nvar BrokerTransform = function (options) {\n  Transform.call(this, options);\n  this.noAckBatchSize = options ? options.noAckBatchSize : null;\n  this.noAckBatchAge = options ? options.noAckBatchAge : null;\n  this._KafkaBuffer = new KafkaBuffer(this.noAckBatchSize, this.noAckBatchAge);\n};\n\nutil.inherits(BrokerTransform, Transform);\n\nBrokerTransform.prototype._transform = function (chunk, enc, done) {\n  this._KafkaBuffer.addChunk(chunk, this._transformNext.bind(this));\n\n  done();\n};\n\nBrokerTransform.prototype._transformNext = function () {\n  this.push(this._KafkaBuffer.getBatch());\n\n  this._KafkaBuffer.truncateBatch();\n};\n\nmodule.exports = BrokerTransform;","map":{"version":3,"sources":["/home/jerem/Bureau/Cours/IWA/stopcovid-front/node_modules/kafka-node/lib/wrapper/BrokerTransform.js"],"names":["util","require","Transform","KafkaBuffer","BrokerTransform","options","call","noAckBatchSize","noAckBatchAge","_KafkaBuffer","inherits","prototype","_transform","chunk","enc","done","addChunk","_transformNext","bind","push","getBatch","truncateBatch","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,QAAD,CAAP,CAAkBC,SAAlC;;AACA,IAAIC,WAAW,GAAGF,OAAO,CAAC,sBAAD,CAAzB;;AAEA,IAAIG,eAAe,GAAG,UAAUC,OAAV,EAAmB;AACvCH,EAAAA,SAAS,CAACI,IAAV,CAAe,IAAf,EAAqBD,OAArB;AACA,OAAKE,cAAL,GAAsBF,OAAO,GAAGA,OAAO,CAACE,cAAX,GAA4B,IAAzD;AACA,OAAKC,aAAL,GAAqBH,OAAO,GAAGA,OAAO,CAACG,aAAX,GAA2B,IAAvD;AACA,OAAKC,YAAL,GAAoB,IAAIN,WAAJ,CAAgB,KAAKI,cAArB,EAAqC,KAAKC,aAA1C,CAApB;AACD,CALD;;AAOAR,IAAI,CAACU,QAAL,CAAcN,eAAd,EAA+BF,SAA/B;;AAEAE,eAAe,CAACO,SAAhB,CAA0BC,UAA1B,GAAuC,UAAUC,KAAV,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4B;AACjE,OAAKN,YAAL,CAAkBO,QAAlB,CAA2BH,KAA3B,EAAkC,KAAKI,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAlC;;AACAH,EAAAA,IAAI;AACL,CAHD;;AAKAX,eAAe,CAACO,SAAhB,CAA0BM,cAA1B,GAA2C,YAAY;AACrD,OAAKE,IAAL,CAAU,KAAKV,YAAL,CAAkBW,QAAlB,EAAV;;AACA,OAAKX,YAAL,CAAkBY,aAAlB;AACD,CAHD;;AAKAC,MAAM,CAACC,OAAP,GAAiBnB,eAAjB","sourcesContent":["'use strict';\n\nvar util = require('util');\nvar Transform = require('stream').Transform;\nvar KafkaBuffer = require('../batch/KafkaBuffer');\n\nvar BrokerTransform = function (options) {\n  Transform.call(this, options);\n  this.noAckBatchSize = options ? options.noAckBatchSize : null;\n  this.noAckBatchAge = options ? options.noAckBatchAge : null;\n  this._KafkaBuffer = new KafkaBuffer(this.noAckBatchSize, this.noAckBatchAge);\n};\n\nutil.inherits(BrokerTransform, Transform);\n\nBrokerTransform.prototype._transform = function (chunk, enc, done) {\n  this._KafkaBuffer.addChunk(chunk, this._transformNext.bind(this));\n  done();\n};\n\nBrokerTransform.prototype._transformNext = function () {\n  this.push(this._KafkaBuffer.getBatch());\n  this._KafkaBuffer.truncateBatch();\n};\n\nmodule.exports = BrokerTransform;\n"]},"metadata":{},"sourceType":"script"}